!function(){var n="https://connect.detik.com/",e="//cdn.detik.net.id/",t={conf:{appId:64,showSearch:1,setNavbar:!0,navCSSURL:e+"libs/dc/v1/css/nav.css",navSelector:"body",navInsertMethod:"prepend",jQURL:e+"libs/jquery/1.11.1/jquery.min.js",jQAutocmplt:n+"widget/jquery.autocomplete.js",dcNavAPI:n+"js/api/nav?callback=?",dcReadAct:n+"js/read?callback=?",searchURL:"http://search.detik.com/search?",searchParam:"query",pushURL:"wss://push.detik.com/ws/",channel:"dcbc_pub",onLoad:!1,DAOnLoad:!1,DAScriptURL:e+"LogAnalysisTracker/thetracker-detik-v2.0.js",DATracker:!1,redirectUrl:document.location.href},$:{},init:function(){this.pageLoadTime(),this.conf=this.$.extend(this.conf,DTKCObj.args[0]),window.dc.q&&this.$.each(window.dc.q,function(n,e){var a=e[0];e=t.$.makeArray(e),e.shift();try{t[a].apply(t,e)}catch(o){}}),w[f]=function(){var n=arguments,e=n[0];n=t.$.makeArray(n),n.shift();try{t[e].apply(t,n)}catch(a){}},this.conf.setNavbar&&this.navContentLoader(),this.callbackHandler()},pageLoadTime:function(){this.$(window).bind("load",function(){Date.now()-DTKCObj.ts;t.conf.setNavbar&&!t.$("#framebar_new .login_area").length&&t.navContentLoad()})},callbackHandler:function(){try{this.conf.onLoad(t)}catch(n){}},navContentLoad:function(){if(t.$("#navCSSURL").length||t.$("<link/>",{id:"navCSSURL",href:t.conf.navCSSURL,rel:"stylesheet",type:"text/css"}).appendTo("head"),!t.$("#framebar_new .login_area").length){var n={appId:t.conf.appId,showSearch:t.conf.showSearch,searchURL:encodeURIComponent(t.conf.searchURL),searchParam:t.conf.searchParam,redirectUrl:t.conf.redirectUrl};"undefined"!=typeof t.conf.placeholder&&(n.placeholder=t.conf.placeholder),t.$.getJSON(t.conf.dcNavAPI,n,function(n){t.$(t.conf.navSelector)[t.conf.navInsertMethod](n.html),t.navJqHandler(),t.modalHandler()})}},navContentLoader:function(){t.navContentLoad(),this.$(document).ready(function(){t.navContentLoad()})},navPushNotif:function(){var n=this.$("#framebar_new #drop_notif");if(n.length){var e=this.conf.channel;!t.initWS(e,function(e){var a=t.$(".notifcount"),o=parseInt(a.text()),i=t.$.parseJSON(e.data);"navNotif"==i.type&&(a.show(),o+=1,t.$(".notifcount").text(o),n.find("#list_notif > p").remove(),n.find("#list_notif").append(i.html))})}},navLoadMenu:function(){this.$.ajax({url:"//cdn.detik.net.id/libs/dc/v1/menu.js",jsonp:!1,jsonpCallback:"dtkmenu",dataType:"jsonp",success:function(n){t.$("#drop_kanal").append(n[0]),t.$(".drop_kanal .menu_k").css("height",.8*t.$(window).height())}})},navJqHandler:function(){t.$("#ico_detik").click(function(){t.$("#drop_kanal").find(".menu_k").length||t.navLoadMenu(),t.$("#ico_detik").hasClass("active")?(t.$("#drop_kanal").fadeOut(200),t.$(".ico_detik").removeClass("active")):(t.$("#drop_kanal").fadeIn(200),t.$(".ico_detik").addClass("active"))}),t.$("#fm_notif").click(function(){t.$("#fm_notif").hasClass("active")?(t.$("#drop_notif").fadeOut(200),t.$(".fm_notif").removeClass("active")):(t.$("#drop_notif").fadeIn(200),t.$(".fm_notif").addClass("active")),$(".notifcount").text("0").hide()}),t.$("#fm_user").click(function(){t.$("#fm_user").hasClass("active")?(t.$("#drop_users").fadeOut(200),t.$(".fm_user").removeClass("active")):(t.$("#drop_users").fadeIn(200),t.$(".fm_user").addClass("active"))}),t.$(".flot_frame").mouseleave(function(){t.$(".flot_frame").fadeOut(),t.$(".fm_select_area").removeClass("active")}),t.$('.new_search input[type="text"]').focus(function(){parseFloat(jQuery.fn.jquery)<1.7?t.loadScript(t.conf.jQURL,function(){jQuery=this.$,t.autocompleteReady()}):t.autocompleteReady()})},autocompleteReady:function(){"undefined"==typeof jQuery.fn.autocomplete&&t.loadScript(t.conf.jQAutocmplt,function(){t.autocomplete()})},autocomplete:function(){jQuery('.new_search input[type="text"]').autocomplete({serviceUrl:"//suggestqueries.google.com/complete/search?client=chrome&callback=?",dataType:"jsonp",paramName:"q",lookupLimit:5,transformResult:function(n){return{suggestions:t.$.map(n[1],function(n){return{value:n,data:n}})}}})},modalHandler:function(){var n,e="iframe#box_login_iframe",a=document.location.href;t.$.createIframe=function(n){t.$("#bg_page_login").length||(t.$("<div/>",{id:"bg_page_login"}).appendTo("body"),t.$("<div/>",{"class":"box_login"}).appendTo("#bg_page_login"),t.$("#bg_page_login").append('<div id="black_close"></div>'),t.$("<iframe/>",{id:"box_login_iframe",scrolling:"no",frameborder:"no",src:n}).css("background-color","transparent").appendTo(".box_login"),t.$.linkListener())},t.$.closepop=function(){t.$("#bg_page_login").fadeOut(150),t.$("#bg_page_login").remove(),clearInterval(n)},t.$.loginbox=function(n,a,o){t.$(e).animate({height:o,width:a},200).attr("src",n)},t.$.addUrlParam=function(n,e,t){return str=n.split("?").length>1?"&":"?",n+str+e+"="+t},t.$.linkListener=function(){n=setInterval(function(){if(""!==window.location.hash){if("#close"==window.location.hash)t.$.closepop();else if("#undefined"==window.location.hash)t.$.closepop();else{if("#main"==window.location.hash)return;fragment=location.href.split("#")[1],hash=fragment.split(" "),hash[1]||(hash=fragment.split("%20")),size=hash[1].split("-"),url=t.$.addUrlParam(hash[0],"parentURI",a),width=size[0],height=size[1],t.$.loginbox(url,width,height)}window.location.hash="main"}},200)},t.$.anim=function(n,o,i){var c=t.$.addUrlParam(t.$(n).attr("alt"),"parentURI",a);t.$.createIframe(c),t.$("#bg_page_login").fadeIn(200),t.$(e).animate({height:o,width:i},200)},t.$.doLogin=function(){t.$.anim(t.$(".to_login"),440,670)},t.$.dol=function(n){if($(n).attr("href").split("clientId=51").length>1)var e=500,a=840;else if(t.$(n).hasClass("to_login"))var e=440,a=670;else var e=500,a=840;t.$.anim(n,e,a)},t.$(".to_login, .to_reg").click(function(){return t.$.dol(this),!1}),t.$.fn.on&&(t.$("#navdetikid").on("click",".to_login, .to_reg",function(){return t.$.dol(this),!1}),t.$("#navdetikid").on("click",".userlogin",function(){t.$("#drop_user").fadeIn(100),t.$(".userlogin").css("background-color","#ffffff")}),t.$("#navdetikid").on("mouseleave",".userlogin",function(){t.$("#drop_user").delay(500).fadeOut(0),t.$(".userlogin").delay(500).css("background-color","#E6E6E6")}),t.$("#navdetikid").on("mouseover","#drop_user",function(){t.$("#drop_user").fadeIn(0),t.$(".userlogin").css("background-color","#ffffff")})),t.$.fn.live&&(t.$(".to_login, .to_reg").live("click",function(){return t.$.dol(this),!1}),t.$(".userlogin").live("click",function(){t.$("#drop_user").fadeIn(100),t.$(".userlogin").css("background-color","#ffffff")}),t.$(".userlogin").live("mouseleave",function(){t.$("#drop_user").delay(500).fadeOut(0),t.$(".userlogin").delay(500).css("background-color","#E6E6E6")}),t.$("#drop_user").live("mouseover",function(){t.$("#drop_user").fadeIn(0),t.$(".userlogin").css("background-color","#ffffff")}))},jqueryLoaded:function(){this.$=$,this.init()},loadScript:function(n,e){var t=document.createElement("script");t.src=n,t.async=1,t.readyState?t.onreadystatechange=function(){("loaded"==t.readyState||"complete"==t.readyState)&&(t.onreadystatechange=null,e())}:t.onload=function(){e()};var a=document.getElementsByTagName("head")[0];a.appendChild(t)},initJquery:function(){"undefined"==typeof jQuery?this.loadScript(this.conf.jQURL,function(){t.jqueryLoaded()}):t.jqueryLoaded()},isFunction:function(n){return"[object Function]"==Object.prototype.toString.call(n)},initWS:function(n,e){if(!window.WebSocket)return!1;if(!this.isFunction(e))return!1;var t=new window.WebSocket(this.conf.pushURL+n);return t.onerror=function(n){},t.onmessage=e,!0},detikTracker:function(){var n=arguments;this.loadScript(this.conf.DAScriptURL,function(){detikTracker.apply(this,n)})},readTracker:function(){var n={token:arguments[0],clientId:arguments[1]?arguments[1]:this.conf.appId};arguments[2]&&(n.df=1);var e=[this.conf.dcReadAct,n];arguments[3]&&e.push(arguments[3]),this.$.getJSON.apply(t,e)},todcapi:function(e,t,a){return this.$.getJSON(n+e+"?callback=?",t,a)},auth:function(n){this.todcapi("js/api/auth",{appId:this.conf.appId},n)},code:function(n){this.todcapi("js/api/code",{appId:this.conf.appId},n)},loadNav:function(n){this.navContentLoad()},loginModal:function(){var e=n+"oauth/authorize?ui=popup&amp;clientId="+this.conf.appId+"&amp;redirectUrl="+encodeURIComponent(this.conf.redirectUrl);this.$.anim($('<a alt="'+e+'">'),440,670)}};t.initJquery()}();
